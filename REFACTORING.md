# Рефакторинг Dashboard Page

## Обзор изменений

Код был рефакторен для улучшения поддерживаемости и читаемости. Основной файл `page.js` был разделен на несколько специализированных компонентов и кастомный хук.

## Новая структура

### Компоненты (`src/components/`)

1. **`ApiKeyTable.js`** - Таблица для отображения API ключей
   - Отвечает только за отображение данных
   - Принимает колбэки для действий (редактирование, удаление, копирование)
   - Не содержит бизнес-логику

2. **`CreateKeyModal.js`** - Модальное окно создания ключа
   - Управляет формой создания нового API ключа
   - Принимает состояние и сеттеры как пропсы
   - Не содержит логику работы с API

3. **`EditKeyModal.js`** - Модальное окно редактирования ключа
   - Простая форма для изменения имени ключа
   - Принимает данные ключа и обработчики

4. **`DeleteKeyModal.js`** - Модальное окно удаления ключа
   - Подтверждение удаления с предупреждением
   - Принимает ключ для удаления и обработчики

5. **`UsageCard.js`** - Карточка с информацией о плане
   - Статический компонент для отображения статистики использования
   - Может быть легко расширен для динамических данных

### Хуки (`src/hooks/`)

1. **`useApiKeys.js`** - Кастомный хук для управления API ключами
   - Содержит всю логику работы с Supabase
   - Управляет состоянием компонентов
   - Возвращает функции для CRUD операций
   - Обрабатывает ошибки и возвращает результаты операций

### Основной файл (`src/app/dashboards/page.js`)

- Теперь содержит только композицию компонентов
- Использует кастомный хук для получения данных и функций
- Добавляет обработку уведомлений к операциям
- Значительно упрощен и читаем

## Преимущества рефакторинга

### 1. Разделение ответственности
- Каждый компонент отвечает за одну конкретную задачу
- Бизнес-логика отделена от UI компонентов
- Легче тестировать отдельные части

### 2. Переиспользование
- Компоненты можно использовать в других частях приложения
- Хук `useApiKeys` может быть использован в других компонентах
- Модальные окна можно адаптировать для других сущностей

### 3. Поддерживаемость
- Изменения в одном компоненте не влияют на другие
- Легче найти и исправить баги
- Проще добавлять новую функциональность

### 4. Читаемость
- Основной файл стал намного короче и понятнее
- Каждый компонент имеет четкую цель
- Логика работы с API централизована в хуке

## Использование

### Основной компонент
```javascript
import { useApiKeys } from '../../hooks/useApiKeys';
import ApiKeyTable from '../../components/ApiKeyTable';

export default function DashboardsPage() {
  const { apiKeys, loading, handleCreateKey, ... } = useApiKeys();
  
  return (
    <ApiKeyTable 
      apiKeys={apiKeys}
      loading={loading}
      onEdit={openEditModal}
      // ... другие пропсы
    />
  );
}
```

### Кастомный хук
```javascript
const {
  apiKeys,        // массив ключей
  loading,        // состояние загрузки
  handleCreateKey, // функция создания
  handleDeleteKey, // функция удаления
  // ... другие функции
} = useApiKeys();
```

## Дальнейшие улучшения

1. **Типизация** - Добавить TypeScript для лучшей типизации
2. **Тестирование** - Написать unit тесты для компонентов и хука
3. **Обработка ошибок** - Улучшить обработку ошибок API
4. **Оптимизация** - Добавить мемоизацию для больших списков
5. **Анимации** - Добавить плавные переходы между состояниями 